$TTL 86400
@ IN SOA {{ hostvars['bastion'].fqdn }}. admin.{{ hostvars['bastion'].fqdn.split('.')[1:] | join('.') }} (
                                                2020021821 ;Serial
                                                3600 ;Refresh
                                                1800 ;Retry
                                                604800 ;Expire
                                                86400 ;Minimum TTL
)

;Name Server / Bastion Information
@ IN NS {{ hostvars['bastion'].fqdn }}.

;IP Address for Name Server
{{ hostvars['bastion'].fqdn.split('.')[0] }} IN A {{ hostvars['bastion'].bastion_ip }}

;entry for bootstrap node
{{ hostvars['bootstrap_node'].hostname }}.{{ metadata_name }}.{{ base_domain }}. IN A {{ hostvars['bootstrap_node'].node_ip }}

; entries for the control nodes
{% for node in groups['control_nodes'] %}
{{ hostvars[node].hostname }}.{{ metadata_name }}.{{ base_domain }}. IN A {{ hostvars[node].node_ip }}
{% endfor %}

; entries for the compute nodes
{% for node in groups['compute_nodes'] %}
{{ hostvars[node].hostname }}.{{ metadata_name }}.{{ base_domain }}. IN A {{ hostvars[node].node_ip }}
{% endfor %}

;The api identifies the IP of your load balancer.
api.{{ metadata_name }}     IN    CNAME {{ hostvars['bastion'].fqdn }}.
api-int.{{ metadata_name }} IN    CNAME {{ hostvars['bastion'].fqdn }}.

;The wildcard also identifies the load balancer.
apps.{{ metadata_name }}  IN    CNAME {{ hostvars['bastion'].fqdn }}.
*.apps.{{ metadata_name }}  IN    CNAME {{ hostvars['bastion'].fqdn }}.

;EOF
