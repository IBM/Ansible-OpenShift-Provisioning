{% if hcp.compute_node_type | lower == 'zvm' %} 
rd.neednet=1 ai.ip_cfg_override=1 console=ttysclp0 coreos.live.rootfs_url=http://{{ hcp.bastion_params.ip }}:8080/rootfs.img ip={{ hcp.data_plane.zvm.nodes[item].interface.ip }}::{{ hcp.data_plane.zvm.gateway }}:{{ hcp.data_plane.zvm.subnetmask }}{% if hcp.data_plane.zvm.network_mode | lower != 'roce' %}::{{ hcp.data_plane.zvm.nodes[item].interface.ifname }}:none{% endif %} nameserver={{ hcp.mgmt_cluster_nameserver }} zfcp.allow_lun_scan=0 {% if hcp.data_plane.zvm.network_mode | lower != 'roce' %}rd.znet={{ hcp.data_plane.zvm.nodes[item].interface.nettype }},{{ hcp.data_plane.zvm.nodes[item].interface.subchannels }},{{ hcp.data_plane.zvm.nodes[item].interface.options }}{% endif %} {% if hcp.data_plane.zvm.disk_type | lower != 'fcp' %}rd.dasd=0.0.{{ hcp.data_plane.zvm.nodes[item].dasd.disk_id }}{% else %}rd.zfcp={{ hcp.data_plane.zvm.nodes[item].lun[0].paths[0].fcp}},{{ hcp.data_plane.zvm.nodes[item].lun[0].paths[0].wwpn }},{{ hcp.data_plane.zvm.nodes[item].lun[0].id }} {% endif %} random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8"
{% elif hcp.compute_node_type | lower == 'lpar' and hcp.data_plane.lpar.network_mode | lower != 'hipersockets' %}
rd.neednet=1 cio_ignore=all,!condev ai.ip_cfg_override=1 console=ttysclp0 coreos.live.rootfs_url=http://{{ hcp.bastion_params.ip }}:8080/rootfs.img ip={{ hcp.data_plane.lpar.nodes[item].interface.ip }}::{{ hcp.data_plane.lpar.gateway }}:{{ hcp.data_plane.lpar.subnetmask }}::{{ hcp.data_plane.lpar.nodes[item].interface.ifname }}:none nameserver={{ hcp.mgmt_cluster_nameserver }} zfcp.allow_lun_scan=0 {% if hcp.data_plane.lpar.network_mode | lower != 'roce' %}rd.znet={{ hcp.data_plane.lpar.nodes[item].interface.nettype }},{{ hcp.data_plane.lpar.nodes[item].interface.subchannels }},{{ hcp.data_plane.lpar.nodes[item].interface.options }}{% endif %} {% if hcp.data_plane.lpar.disk_type | lower != 'nvme' %}{% if hcp.data_plane.lpar.disk_type | lower != 'fcp' %}rd.dasd=0.0.{{ hcp.data_plane.lpar.nodes[item].dasd.disk_id }}{% else %}rd.zfcp={{ hcp.data_plane.lpar.nodes[item].lun[0].paths[0].fcp}},{{ hcp.data_plane.lpar.nodes[item].lun[0].paths[0].wwpn }},{{ hcp.data_plane.lpar.nodes[item].lun[0].id }} {% endif %} {% endif %} random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8"
{% else %}
rd.neednet=1 cio_ignore=all,!condev ai.ip_cfg_override=1 console=ttysclp0 coreos.live.rootfs_url=http://{{ hcp.bastion_params.internal_ip }}:8080/rootfs.img ip={{ hcp.data_plane.lpar.nodes[item].hipersockets.internal_ip }}::{{ hcp.bastion_params.internal_ip }}:{{ hcp.data_plane.lpar.subnetmask }}{% if hcp.data_plane.lpar.network_mode | lower != 'roce' %}::{{ hcp.data_plane.lpar.nodes[item].hipersockets.ifname }}:none{% endif %} nameserver={{ hcp.mgmt_cluster_nameserver }} zfcp.allow_lun_scan=0 {% if hcp.data_plane.lpar.network_mode | lower != 'roce' %}rd.znet={{ hcp.data_plane.lpar.nodes[item].interface.nettype }},{{ hcp.data_plane.lpar.nodes[item].hipersockets.subchannels }},{{ hcp.data_plane.lpar.nodes[item].interface.options }}{% endif %} {% if hcp.data_plane.lpar.disk_type | lower != 'nvme' %}{% if hcp.data_plane.lpar.disk_type | lower != 'fcp' %}rd.dasd=0.0.{{ hcp.data_plane.lpar.nodes[item].dasd.disk_id }}{% else %}rd.zfcp={{ hcp.data_plane.lpar.nodes[item].lun[0].paths[0].fcp}},{{ hcp.data_plane.lpar.nodes[item].lun[0].paths[0].wwpn }},{{ hcp.data_plane.lpar.nodes[item].lun[0].id }} {% endif %} {% endif %} random.trust_cpu=on rd.luks.options=discard ignition.firstboot ignition.platform.id=metal console=tty1 console=ttyS1,115200n8 coreos.inst.persistent-kargs="console=tty1 console=ttyS1,115200n8"
{% endif %}
